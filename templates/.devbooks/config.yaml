# .devbooks/config.yaml
# DevBooks Protocol Discovery Configuration
#
# This file is generated by DevBooks to help AI tools discover project configuration.
# Do not delete or modify it unless you understand what each field means.

# ==================== DevBooks Config ====================

# Root directory
root: dev-playbooks/

# Constitution file (must load)
constitution: constitution.md

# Project context
project: project.md

# Path mappings
paths:
  specs: specs/
  changes: changes/
  scripts: scripts/
  staged: specs/_staged/
  anti_patterns: specs/_meta/anti-patterns/

# ==================== Backward Compatibility ====================

# Root mapping (backward compatible)
truth_root: dev-playbooks/specs/
change_root: dev-playbooks/changes/

# Rules document location
agents_doc: dev-playbooks/project.md

# Project profile (optional)
project_profile: dev-playbooks/specs/_meta/project-profile.md

# ==================== Protocol Constraints ====================

constraints:
  # Whether apply requires explicit role
  apply_requires_role: true

  # Allowed roles in apply
  apply_roles:
    - test-owner
    - coder
    - reviewer
    - test-reviewer

  # Whether Test Owner and Coder must be isolated
  role_isolation: true

  # Whether Coder is forbidden to modify tests/
  coder_no_tests: true

  # Structural guardrails enabled
  structural_guardrails: true

  # Constitution required
  require_constitution: true

# ==================== Fitness Configuration ====================

fitness:
  # Mode: error (block) | warn | off
  mode: warn

  # Rules file path
  rules_file: specs/architecture/fitness-rules.md

# ==================== AC Tracing ====================

tracing:
  # AC coverage threshold
  coverage_threshold: 80

  # Output format: text | json
  output_format: text

# ==================== Proposal Phase ====================

proposal:
  # Enable debate (Author/Challenger/Judge)
  enable_debate: true

  # Require impact analysis for cross-module changes
  require_impact_analysis: true

# ==================== AI Native Framework Extensions ====================
#
# Notes:
# - This section is optional; if not configured, must not change existing workflow behavior.
# - These fields are parsed and output by `scripts/config-discovery.sh` (append-only; does not break v2 fixed field order).

# Gate profile: light | standard | strict
gate_profile: standard

# Model profile id (for Knife budget/slice_limits)
model_profile: default

# Capacity factor (environment/tool boost). Only affects thresholds, not gate principles.
model_capacity_factor: 1.0

# Knife slice limits (optional)
slice_limits: {}

# Void protocol toggle (enables Freeze/Thaw)
void:
  enabled: false

# Extension Packs (adds risk flags/evidence requirements/extra checks)
extensions:
  enabled_packs: []

# Brownfield import mapping (index-only; do not copy long docs)
# Optional: upstream SSOT docs root (index-only; do not copy long docs into change packages)
# Example: truth_mapping: { ssot_root: "SSOT docs/" }
truth_mapping: {}

# Policy library -> capability injection mapping (recommend referencing by id)
skill_injection: []

# Platform sync targets (empty -> no-op; non-empty -> Delivery/Scaffold triggers artifact sync)
platform_targets: []
